{"version":3,"sources":["script.js"],"names":["cvs","document","querySelector","Particle","isMouse","cvsCtx","x","y","vx","vy","lastTime","Date","now","r","ax","ay","t","beginPath","fillStyle","arc","Math","PI","fill","closePath","ParticleGrid","width","height","speed","connectDistance","rad","i","floor","random","cos","sin","clearRect","fillRect","particles","filter","item","alive","render","total","length","push","randomParticle","_interact","requestAnimationFrame","_onEnterFrame","e","offsetX","offsetY","w","offsetWidth","h","offsetHeight","mouse","flag","getContext","window","devicePixelRatio","addEventListener","_init","_onMouseMove","_onClick","l","a","j","b","d","c","atan2","lineWidth","lineCap","strokeStyle","moveTo","lineTo","stroke"],"mappings":"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","sourcesContent":["const cvs = document.querySelector('#cvs');\r\n\r\n/* 粒子 */\r\nclass Particle {\r\n    cvsCtx = null;\r\n    r = 1; // 半径\r\n    x = 0; // 横坐标\r\n    y = 0; // 纵坐标\r\n    vx = 0; // 水平速度\r\n    vy = 0; // 垂直速度\r\n    ax = 0; // 水平加速度\r\n    ay = 0; // 垂直加速度\r\n    lastTime = 0;\r\n    isMouse = false;\r\n\r\n    constructor({ isMouse = false, cvsCtx, x, y, vx, vy }) {\r\n        this.isMouse = isMouse;\r\n        this.cvsCtx = cvsCtx;\r\n        this.x = x;\r\n        this.y = y;\r\n        this.vx = vx;\r\n        this.vy = vy;\r\n        this.lastTime = Date.now();\r\n    }\r\n\r\n    render() {\r\n        if (!this.isMouse) {\r\n            const { cvsCtx, r, vx, vy, ax, ay, lastTime } = this;\r\n            const t = (Date.now() - lastTime) / 1000;\r\n            this.x += vx * t + ax * t ** 2 * 0.5;\r\n            this.y += vy * t + ay * t ** 2 * 0.5;\r\n            // this.vx += ax * t;\r\n            // this.vy += ay * t;\r\n            cvsCtx.beginPath();\r\n            cvsCtx.fillStyle = 'rgba(255,255,255,1)';\r\n            cvsCtx.arc(this.x, this.y, r, 0, Math.PI * 2, false);\r\n            cvsCtx.fill();\r\n            cvsCtx.closePath();\r\n        }\r\n        this.lastTime = Date.now();\r\n    }\r\n}\r\n\r\n/* 粒子网格 */\r\nclass ParticleGrid {\r\n    cvs = null;\r\n    cvsCtx = null;\r\n    width = 0;\r\n    height = 0;\r\n    speed = 100;\r\n    connectDistance = 200;\r\n    particles = [];\r\n    flag = false;\r\n\r\n    get total() {\r\n        return (this.width * this.height) ** 0.5 * 0.24;\r\n    }\r\n\r\n    get randomParticle() {\r\n        const { cvsCtx, width, height, speed, connectDistance } = this;\r\n        let x, y, rad;\r\n        const i = Math.floor(Math.random() * 4);\r\n        switch (i) {\r\n            case 0:\r\n                rad = Math.random() * Math.PI;\r\n                x = Math.random() * (width + 2 * connectDistance) - connectDistance;\r\n                y = -connectDistance;\r\n                break;\r\n            case 1:\r\n                rad = (Math.random() + 0.5) * Math.PI;\r\n                x = width + connectDistance;\r\n                y = Math.random() * (height + 2 * connectDistance) - connectDistance;\r\n                break;\r\n            case 2:\r\n                rad = (Math.random() - 1) * Math.PI;\r\n                x = Math.random() * (width + 2 * connectDistance) - connectDistance;\r\n                y = height + connectDistance;\r\n                break;\r\n            case 3:\r\n                rad = (Math.random() - 0.5) * Math.PI;\r\n                x = -connectDistance;\r\n                y = Math.random() * (height + 2 * connectDistance) - connectDistance;\r\n                break;\r\n        }\r\n        return new Particle({\r\n            cvsCtx,\r\n            x,\r\n            y,\r\n            vx: Math.cos(rad) * speed,\r\n            vy: Math.sin(rad) * speed,\r\n        });\r\n    }\r\n\r\n    constructor(cvs) {\r\n        this.cvs = cvs;\r\n        this.cvsCtx = cvs.getContext('2d');\r\n        this.width = this.cvs.width = 2560;\r\n        this.height = this.cvs.height = 1440;\r\n        this.width = this.cvs.width = cvs.offsetWidth * window.devicePixelRatio;\r\n        this.height = this.cvs.height = cvs.offsetHeight * window.devicePixelRatio;\r\n        window.addEventListener('resize', () => {\r\n            this.width = this.cvs.width = cvs.offsetWidth * window.devicePixelRatio;\r\n            this.height = this.cvs.height = cvs.offsetHeight * window.devicePixelRatio;\r\n        });\r\n        this._init();\r\n        this._onEnterFrame();\r\n    }\r\n\r\n    _init() {\r\n        const { cvs, cvsCtx, width, height, speed, connectDistance } = this;\r\n        this.particles[0] = new Particle({\r\n            cvsCtx,\r\n            x: 0,\r\n            y: 0,\r\n            vx: 0,\r\n            vy: 0,\r\n        });\r\n        for (let i = 1; i < this.total; i++) {\r\n            const rad = (Math.random() * 2 - 1) * Math.PI;\r\n            this.particles[i] = new Particle({\r\n                cvsCtx,\r\n                x: Math.random() * (width + 2 * connectDistance) - connectDistance,\r\n                y: Math.random() * (height + 2 * connectDistance) - connectDistance,\r\n                vx: Math.cos(rad) * speed,\r\n                vy: Math.sin(rad) * speed,\r\n            });\r\n        }\r\n        cvs.addEventListener('mousemove', this._onMouseMove);\r\n        cvs.addEventListener('click', this._onClick);\r\n    }\r\n\r\n    _onEnterFrame = () => {\r\n        const { cvsCtx, width, height, connectDistance } = this;\r\n        cvsCtx.clearRect(0, 0, width, height);\r\n        cvsCtx.fillStyle = '#000000';\r\n        cvsCtx.fillRect(0, 0, width, height);\r\n        this.particles = this.particles.filter(item => {\r\n            const { x, y } = item;\r\n            const alive =\r\n                x >= -connectDistance &&\r\n                y >= -connectDistance &&\r\n                x <= width + connectDistance &&\r\n                y <= height + connectDistance;\r\n            return alive && item.render(), alive;\r\n        });\r\n        for (let i = 0; i < this.total - this.particles.length; i++) {\r\n            this.particles.push(this.randomParticle);\r\n        }\r\n        this._interact();\r\n        requestAnimationFrame(this._onEnterFrame);\r\n    };\r\n\r\n    _interact() {\r\n        const { cvsCtx, particles, connectDistance, flag } = this;\r\n        const l = particles.length;\r\n        for (let i = 0; i < l - 1; i++) {\r\n            const a = particles[i];\r\n            for (let j = i + 1; j < l; j++) {\r\n                const b = particles[j];\r\n                const d = ((a.x - b.x) ** 2 + (a.y - b.y) ** 2) ** 0.5;\r\n\r\n                if (a.isMouse) {\r\n                    const r = flag ? connectDistance : connectDistance * 0.6;\r\n                    if (d <= r * (flag ? 1 : 2)) {\r\n                        const c = flag ? 40000 : 20000;\r\n                        const rad = Math.atan2(a.y - b.y, a.x - b.x);\r\n                        b.ax = Math.cos(rad) * c * ((d - r) / r);\r\n                        b.ay = Math.sin(rad) * c * ((d - r) / r);\r\n                    } else {\r\n                        b.ax = 0;\r\n                        b.ay = 0;\r\n                    }\r\n                }\r\n\r\n                /* 连线 */\r\n                if (d <= connectDistance) {\r\n                    cvsCtx.beginPath();\r\n                    cvsCtx.lineWidth = 1;\r\n                    cvsCtx.lineCap = 'round';\r\n                    cvsCtx.strokeStyle = `rgba(255,255,255,${1 - d / connectDistance})`;\r\n                    cvsCtx.moveTo(a.x, a.y);\r\n                    cvsCtx.lineTo(b.x, b.y);\r\n                    cvsCtx.stroke();\r\n                    cvsCtx.closePath();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    _onMouseMove = e => {\r\n        const { offsetX: x, offsetY: y } = e;\r\n        const {\r\n            width,\r\n            height,\r\n            cvs: { offsetWidth: w, offsetHeight: h },\r\n        } = this;\r\n        const mouse = this.particles[0];\r\n        mouse.isMouse = true;\r\n        mouse.x = x * (width / w);\r\n        mouse.y = y * (height / h);\r\n    };\r\n\r\n    _onClick = e => {\r\n        this.flag = !this.flag;\r\n    };\r\n}\r\n\r\nnew ParticleGrid(cvs);\r\n"],"file":"script.babel.js"}