{"version":3,"sources":["script.js"],"names":["$cvs","document","querySelector","cvsCtx","getContext","intRandom","start","end","Object","prototype","toString","call","TypeError","Math","floor","round","random","w","width","offsetWidth","window","devicePixelRatio","h","height","offsetHeight","fontSize","textOffset","stripeOffset","cutLine","addEventListener","createCutLine","i","push","length","sort","a","b","drawNoise","imageData","createImageData","data","putImageData","drawText","fillStyle","fillRect","font","textAlign","textBaseline","save","beginPath","rect","clip","fillText","restore","drawStripe","f","createLinearGradient","addColorStop","lastTime","r","requestAnimationFrame","draw","Date","now","clearRect"],"mappings":"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","sourcesContent":["const $cvs = document.querySelector('#cvs');\r\nconst cvsCtx = $cvs.getContext('2d');\r\n\r\n/**\r\n * 生成一个介于 start 和 end 之间的整数，闭区间\r\n */\r\nfunction intRandom(start, end) {\r\n    if (Object.prototype.toString.call(start) !== '[object Number]') throw new TypeError(`${start} is not a number`);\r\n    if (Object.prototype.toString.call(end) !== '[object Number]') throw new TypeError(`${end} is not a number`);\r\n    start = Math.floor(start);\r\n    end = Math.floor(end) + 1;\r\n    return Math.round(Math.random() * (end - start) + start);\r\n}\r\n\r\nlet w = ($cvs.width = $cvs.offsetWidth * window.devicePixelRatio);\r\nlet h = ($cvs.height = $cvs.offsetHeight * window.devicePixelRatio);\r\nlet fontSize = w / 4;\r\nlet textOffset = w / 100;\r\nlet stripeOffset = 0;\r\nlet cutLine;\r\n\r\nwindow.addEventListener('resize', function () {\r\n    w = $cvs.width = $cvs.offsetWidth * window.devicePixelRatio;\r\n    h = $cvs.height = $cvs.offsetHeight * window.devicePixelRatio;\r\n    fontSize = w / 4;\r\n    textOffset = w / 100;\r\n});\r\n\r\nfunction createCutLine() {\r\n    cutLine = [0, h];\r\n    for (let i = 0; i < 6; i++) {\r\n        cutLine.push(intRandom(cutLine[0], cutLine[cutLine.length - 1]));\r\n    }\r\n    cutLine.sort((a, b) => a - b);\r\n}\r\n\r\nfunction drawNoise() {\r\n    const imageData = cvsCtx.createImageData(w, h);\r\n    const data = imageData.data;\r\n    for (let i = 0; i < data.length; i += 4) {\r\n        data[i] = data[i + 1] = data[i + 2] = intRandom(0, 255);\r\n        data[i + 3] = 255;\r\n    }\r\n    cvsCtx.putImageData(imageData, 0, 0);\r\n}\r\n\r\nfunction drawText() {\r\n    cvsCtx.fillStyle = '#000000';\r\n    cvsCtx.fillRect(0, 0, w, h);\r\n\r\n    cvsCtx.fillStyle = '#ffffff';\r\n    cvsCtx.font = `bold ${fontSize}px Helvetica`;\r\n    cvsCtx.textAlign = 'center';\r\n    cvsCtx.textBaseline = 'middle';\r\n\r\n    createCutLine();\r\n    for (let i = 0; i < cutLine.length - 1; i++) {\r\n        cvsCtx.save();\r\n        cvsCtx.beginPath();\r\n        cvsCtx.rect(0, cutLine[i], w, cutLine[i + 1] - cutLine[i]);\r\n        cvsCtx.clip();\r\n        cvsCtx.fillText('NOISE', w / 2 + intRandom(-textOffset, textOffset), h / 2);\r\n        cvsCtx.restore();\r\n    }\r\n}\r\n\r\nfunction drawStripe() {\r\n    cvsCtx.beginPath();\r\n    const f = cvsCtx.createLinearGradient(0, -stripeOffset, 0, 2 * h - stripeOffset);\r\n    for (let i = 0; i < 256; i += 2) {\r\n        f.addColorStop(i / 256, 'rgba(255, 255, 255, 0.1)');\r\n        f.addColorStop((i + 1) / 256, 'rgba(255, 255, 255, 0)');\r\n    }\r\n    cvsCtx.fillStyle = f;\r\n    cvsCtx.fillRect(0, 0, w, h);\r\n    stripeOffset = (stripeOffset + h / 256) % h;\r\n}\r\n\r\nlet lastTime = 0;\r\nlet r = intRandom(1, 3);\r\nrequestAnimationFrame(function draw() {\r\n    if (Date.now() - lastTime > 40) {\r\n        lastTime = Date.now();\r\n        cvsCtx.clearRect(0, 0, w, h);\r\n        if (Math.floor(lastTime / r / 1000) % 2 === 0) {\r\n            r = intRandom(1, 3);\r\n            drawNoise();\r\n        } else {\r\n            drawText();\r\n        }\r\n        drawStripe();\r\n    }\r\n    requestAnimationFrame(draw);\r\n});\r\n"],"file":"script.babel.js"}