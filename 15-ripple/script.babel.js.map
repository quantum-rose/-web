{"version":3,"sources":["script.js"],"names":["mySwiper","Swiper","direction","mousewheel","pagination","el","document","$svg","querySelector","$ripple","$ripples","addEventListener","e","matrix","getScreenCTM","inverse","screenPoint","createSVGPoint","x","clientX","y","clientY","svgPoint","matrixTransform","$newRipple","cloneNode","setAttribute","appendChild","$animates","querySelectorAll","animationendCount","animationend","length","remove","forEach","item","onend","beginElement","window","Wave","elem","id","Date","now","clicked","init","body","insertAdjacentHTML","backgroundImage","$feImage","$feDisplacementMap","style","filter","lastTime","percent","draw","Math","min","size","offsetX","offsetY","requestAnimationFrame","radius","cvs","createElement","width","height","cvsCtx","getContext","save","translate","i","rad","beginPath","arc","PI","x0","cos","y0","sin","x1","y1","f","createLinearGradient","addColorStop","strokeStyle","lineWidth","stroke","startRadius","endRadius","l","createRadialGradient","fillStyle","fill","restore","prototype","toDataURL"],"mappings":"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","sourcesContent":["const mySwiper = new Swiper('.swiper-container', {\r\n    direction: 'vertical', // 垂直切换选项\r\n    mousewheel: true,\r\n    pagination: {\r\n        el: '.swiper-pagination',\r\n    },\r\n});\r\n\r\n(function (document) {\r\n    const $svg = document.querySelector('#svg');\r\n    const $ripple = document.querySelector('.ripple');\r\n    const $ripples = document.querySelector('#ripples');\r\n\r\n    $svg.addEventListener('click', function (e) {\r\n        const matrix = $svg.getScreenCTM().inverse();\r\n        const screenPoint = $svg.createSVGPoint();\r\n        screenPoint.x = e.clientX;\r\n        screenPoint.y = e.clientY;\r\n        const svgPoint = screenPoint.matrixTransform(matrix);\r\n\r\n        const $newRipple = $ripple.cloneNode(true);\r\n        $newRipple.setAttribute('transform', `translate(${svgPoint.x}, ${svgPoint.y})`);\r\n        $ripples.appendChild($newRipple);\r\n\r\n        const $animates = $newRipple.querySelectorAll('animate');\r\n        let animationendCount = 0;\r\n        const animationend = function () {\r\n            if (++animationendCount == $animates.length) {\r\n                $newRipple.remove();\r\n            }\r\n        };\r\n        $animates.forEach(item => {\r\n            item.onend = animationend;\r\n            item.beginElement();\r\n        });\r\n    });\r\n})(document);\r\n\r\n(function (window, document) {\r\n    class Wave {\r\n        constructor(elem) {\r\n            this.elem = elem;\r\n            this.id = 'wave' + Date.now();\r\n            this.clicked = false;\r\n            this.init();\r\n        }\r\n\r\n        init() {\r\n            document.body.insertAdjacentHTML(\r\n                'afterbegin',\r\n                `<svg\r\n                    version=\"1.1\"\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    xmlns:xlink=\"http://www.w3.org/1999/xlink\"\r\n                    style=\"position: absolute; height: 0; clip: rect(0 0 0 0);\"\r\n                >\r\n                    <defs>\r\n                        <filter id=\"${this.id}\">\r\n                            <feImage\r\n                                x=\"0\"\r\n                                y=\"0\"\r\n                                width=\"0\"\r\n                                height=\"0\"\r\n                                result=\"img\"\r\n                                xlink:href=\"${this.backgroundImage}\"\r\n                            ></feImage>\r\n                            <feDisplacementMap\r\n                                in=\"SourceGraphic\"\r\n                                in2=\"img\"\r\n                                scale=\"0\"\r\n                                xChannelSelector=\"R\"\r\n                                yChannelSelector=\"G\"\r\n                                color-interpolation-filters=\"sRGB\"\r\n                            ></feDisplacementMap>\r\n                            <feComposite operator=\"in\" in2=\"img\"></feComposite>\r\n                            <feComposite in2=\"SourceGraphic\"></feComposite>\r\n                        </filter>\r\n                    </defs>\r\n                </svg>`\r\n            );\r\n            this.$feImage = document.querySelector(`#${this.id} feImage`);\r\n            this.$feDisplacementMap = document.querySelector(`#${this.id} feDisplacementMap`);\r\n\r\n            this.elem.addEventListener('click', e => {\r\n                if (this.clicked) return;\r\n                this.clicked = true;\r\n                this.elem.style.filter = `url(#${this.id})`;\r\n                let lastTime = 0;\r\n                let percent = 0;\r\n                const draw = () => {\r\n                    if (Date.now() - lastTime > 16) {\r\n                        lastTime = Date.now();\r\n                        percent = Math.min(percent + 0.01, 1);\r\n                        const size = 1000 * percent;\r\n                        this.$feImage.setAttribute('x', e.offsetX - size / 2);\r\n                        this.$feImage.setAttribute('y', e.offsetY - size / 2);\r\n                        this.$feImage.setAttribute('width', size);\r\n                        this.$feImage.setAttribute('height', size);\r\n                        this.$feDisplacementMap.setAttribute('scale', 50 * (1 - percent));\r\n                    }\r\n\r\n                    if (percent !== 1) {\r\n                        requestAnimationFrame(draw);\r\n                    } else {\r\n                        this.clicked = false;\r\n                        this.elem.style.filter = '';\r\n                    }\r\n                };\r\n                draw();\r\n            });\r\n        }\r\n    }\r\n\r\n    const radius = 256;\r\n    const cvs = document.createElement('canvas');\r\n    cvs.width = cvs.height = radius * 2;\r\n    const cvsCtx = cvs.getContext('2d');\r\n\r\n    cvsCtx.save();\r\n    cvsCtx.translate(radius, radius);\r\n\r\n    /* 绘制红绿相间的圆锥渐变，其实是4个线性渐变 */\r\n    for (let i = 0, rad = 0; i < 4; i++) {\r\n        cvsCtx.beginPath();\r\n        cvsCtx.arc(0, 0, 128, rad, rad + Math.PI / 2, false);\r\n        const x0 = radius * Math.cos(rad);\r\n        const y0 = radius * Math.sin(rad);\r\n        rad += Math.PI / 2;\r\n        const x1 = radius * Math.cos(rad);\r\n        const y1 = radius * Math.sin(rad);\r\n        let f = cvsCtx.createLinearGradient(x0, y0, x1, y1);\r\n        f.addColorStop(0, i % 2 ? '#f00' : '#0f0');\r\n        f.addColorStop(1, i % 2 ? '#0f0' : '#f00');\r\n        cvsCtx.strokeStyle = f;\r\n        cvsCtx.lineWidth = radius;\r\n        cvsCtx.stroke();\r\n    }\r\n\r\n    /* 绘制环形条纹 */\r\n    const startRadius = 100;\r\n    const endRadius = 250;\r\n    const l = endRadius - startRadius;\r\n    const f = cvsCtx.createRadialGradient(0, 0, startRadius, 0, 0, endRadius);\r\n    f.addColorStop(0, 'rgba(127,127,127,1)');\r\n    f.addColorStop(17 / l, 'rgba(115,115,115,.8)');\r\n    f.addColorStop(25 / l, 'rgba(115,115,115,0.1)');\r\n    f.addColorStop(28 / l, 'rgba(115,115,115,0.1)');\r\n    f.addColorStop(37 / l, 'rgba(115,104,104,.8)');\r\n    f.addColorStop(43 / l, 'rgba(115,104,104,1)');\r\n    f.addColorStop(44 / l, 'rgba(127,127,127,1)');\r\n    f.addColorStop(50 / l, 'rgba(127,127,127,.6)');\r\n    f.addColorStop(54 / l, 'rgba(127,127,127,0)');\r\n    f.addColorStop(61 / l, 'rgba(0,0,0,0)');\r\n    f.addColorStop(67 / l, 'rgba(0,0,0,1)');\r\n    f.addColorStop(78 / l, 'rgba(0,0,0,1)');\r\n    f.addColorStop(88 / l, 'rgba(0,0,0,0)');\r\n    f.addColorStop(100 / l, 'rgba(0,0,0,0)');\r\n    f.addColorStop(108 / l, 'rgba(0,0,0,1)');\r\n    f.addColorStop(117 / l, 'rgba(0,0,0,1)');\r\n    f.addColorStop(136 / l, 'rgba(0,0,0,0)');\r\n    f.addColorStop(1, 'rgba(0,0,0,0)');\r\n    cvsCtx.beginPath();\r\n    cvsCtx.arc(0, 0, radius, 0, Math.PI * 2);\r\n    cvsCtx.fillStyle = f;\r\n    cvsCtx.fill();\r\n    cvsCtx.restore();\r\n\r\n    Wave.prototype.backgroundImage = cvs.toDataURL();\r\n\r\n    window.Wave = Wave;\r\n})(window, document);\r\n\r\nnew Wave(document.querySelector('#pond'));\r\nnew Wave(document.querySelector('#box'));\r\n"],"file":"script.babel.js"}