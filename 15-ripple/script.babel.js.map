{"version":3,"sources":["script.js"],"names":["mySwiper","Swiper","direction","mousewheel","pagination","el","document","$svg","querySelector","$ripple","$ripples","addEventListener","e","matrix","getScreenCTM","inverse","screenPoint","createSVGPoint","x","clientX","y","clientY","svgPoint","matrixTransform","$newRipple","cloneNode","setAttribute","appendChild","$animates","querySelectorAll","animationendCount","animationend","length","remove","forEach","item","onend","beginElement","window","Wave","elem","id","Date","now","clicked","init","body","insertAdjacentHTML","backgroundImage","$feImage","$feDisplacementMap","style","filter","lastTime","percent","draw","Math","min","size","offsetX","offsetY","requestAnimationFrame","radius","cvs","createElement","width","height","cvsCtx","getContext","save","translate","i","rad","beginPath","arc","PI","x0","cos","y0","sin","x1","y1","f","createLinearGradient","addColorStop","strokeStyle","lineWidth","stroke","startRadius","endRadius","l","createRadialGradient","fillStyle","fill","restore","prototype","toDataURL"],"mappings":"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","sourcesContent":["const mySwiper = new Swiper('.swiper-container', {\r\n    direction: 'vertical', // 垂直切换选项\r\n    mousewheel: true,\r\n    pagination: {\r\n        el: '.swiper-pagination',\r\n    },\r\n});\r\n\r\n(function (document) {\r\n    const $svg = document.querySelector('#svg');\r\n    const $ripple = document.querySelector('.ripple');\r\n    const $ripples = document.querySelector('#ripples');\r\n\r\n    $svg.addEventListener('click', function (e) {\r\n        const matrix = $svg.getScreenCTM().inverse();\r\n        const screenPoint = $svg.createSVGPoint();\r\n        screenPoint.x = e.clientX;\r\n        screenPoint.y = e.clientY;\r\n        const svgPoint = screenPoint.matrixTransform(matrix);\r\n\r\n        const $newRipple = $ripple.cloneNode(true);\r\n        $newRipple.setAttribute('transform', `translate(${svgPoint.x}, ${svgPoint.y})`);\r\n        $ripples.appendChild($newRipple);\r\n\r\n        const $animates = $newRipple.querySelectorAll('animate');\r\n        let animationendCount = 0;\r\n        const animationend = function () {\r\n            if (++animationendCount == $animates.length) {\r\n                $newRipple.remove();\r\n            }\r\n        };\r\n        $animates.forEach(item => {\r\n            item.onend = animationend;\r\n            item.beginElement();\r\n        });\r\n    });\r\n})(document);\r\n\r\n(function (window, document) {\r\n    class Wave {\r\n        constructor(elem) {\r\n            this.elem = elem;\r\n            this.id = 'wave' + Date.now();\r\n            this.clicked = false;\r\n            this.init();\r\n        }\r\n\r\n        init() {\r\n            document.body.insertAdjacentHTML(\r\n                'afterbegin',\r\n                `<svg\r\n                    version=\"1.1\"\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    xmlns:xlink=\"http://www.w3.org/1999/xlink\"\r\n                    style=\"position: absolute; height: 0; clip: rect(0 0 0 0);\"\r\n                >\r\n                    <defs>\r\n                        <filter id=\"${this.id}\">\r\n                            <feImage\r\n                                x=\"0\"\r\n                                y=\"0\"\r\n                                width=\"0\"\r\n                                height=\"0\"\r\n                                result=\"img\"\r\n                                xlink:href=\"${this.backgroundImage}\"\r\n                            ></feImage>\r\n                            <feDisplacementMap\r\n                                in=\"SourceGraphic\"\r\n                                in2=\"img\"\r\n                                scale=\"0\"\r\n                                xChannelSelector=\"R\"\r\n                                yChannelSelector=\"G\"\r\n                                color-interpolation-filters=\"sRGB\"\r\n                            ></feDisplacementMap>\r\n                            <feComposite operator=\"in\" in2=\"img\"></feComposite>\r\n                            <feComposite in2=\"SourceGraphic\"></feComposite>\r\n                        </filter>\r\n                    </defs>\r\n                </svg>`\r\n            );\r\n            this.$feImage = document.querySelector(`#${this.id} feImage`);\r\n            this.$feDisplacementMap = document.querySelector(`#${this.id} feDisplacementMap`);\r\n\r\n            this.elem.addEventListener('click', e => {\r\n                if (this.clicked) return;\r\n                this.clicked = true;\r\n                this.elem.style.filter = `url(#${this.id})`;\r\n                let lastTime = 0;\r\n                let percent = 0;\r\n                const draw = () => {\r\n                    if (Date.now() - lastTime > 16) {\r\n                        lastTime = Date.now();\r\n                        percent = Math.min(percent + 0.01, 1);\r\n                        const size = 1000 * percent;\r\n                        this.$feImage.setAttribute('x', e.offsetX - size / 2);\r\n                        this.$feImage.setAttribute('y', e.offsetY - size / 2);\r\n                        this.$feImage.setAttribute('width', size);\r\n                        this.$feImage.setAttribute('height', size);\r\n                        this.$feDisplacementMap.setAttribute('scale', 50 * (1 - percent));\r\n                    }\r\n\r\n                    if (percent !== 1) {\r\n                        requestAnimationFrame(draw);\r\n                    } else {\r\n                        this.clicked = false;\r\n                        this.elem.style.filter = '';\r\n                    }\r\n                };\r\n                draw();\r\n            });\r\n        }\r\n    }\r\n\r\n    const radius = 256;\r\n    const cvs = document.createElement('canvas');\r\n    cvs.width = cvs.height = radius * 2;\r\n    const cvsCtx = cvs.getContext('2d');\r\n\r\n    cvsCtx.save();\r\n    cvsCtx.translate(radius, radius);\r\n\r\n    /* 绘制红绿相间的圆锥渐变，其实是4个线性渐变 */\r\n    for (let i = 0, rad = 0; i < 4; i++) {\r\n        cvsCtx.beginPath();\r\n        cvsCtx.arc(0, 0, 128, rad, rad + Math.PI / 2, false);\r\n        const x0 = radius * Math.cos(rad);\r\n        const y0 = radius * Math.sin(rad);\r\n        rad += Math.PI / 2;\r\n        const x1 = radius * Math.cos(rad);\r\n        const y1 = radius * Math.sin(rad);\r\n        let f = cvsCtx.createLinearGradient(x0, y0, x1, y1);\r\n        f.addColorStop(0, i % 2 ? '#f00' : '#0f0');\r\n        f.addColorStop(1, i % 2 ? '#0f0' : '#f00');\r\n        cvsCtx.strokeStyle = f;\r\n        cvsCtx.lineWidth = radius;\r\n        cvsCtx.stroke();\r\n    }\r\n\r\n    /* 绘制环形条纹 */\r\n    const startRadius = 100;\r\n    const endRadius = 250;\r\n    const l = endRadius - startRadius;\r\n    const f = cvsCtx.createRadialGradient(0, 0, startRadius, 0, 0, endRadius);\r\n    f.addColorStop(0, 'rgba(127,127,127,1)');\r\n    f.addColorStop(17 / l, 'rgba(115,115,115,.8)');\r\n    f.addColorStop(25 / l, 'rgba(115,115,115,0.1)');\r\n    f.addColorStop(28 / l, 'rgba(115,115,115,0.1)');\r\n    f.addColorStop(37 / l, 'rgba(115,104,104,.8)');\r\n    f.addColorStop(43 / l, 'rgba(115,104,104,1)');\r\n    f.addColorStop(44 / l, 'rgba(127,127,127,1)');\r\n    f.addColorStop(50 / l, 'rgba(127,127,127,.6)');\r\n    f.addColorStop(54 / l, 'rgba(127,127,127,0)');\r\n    f.addColorStop(61 / l, 'rgba(0,0,0,0)');\r\n    f.addColorStop(67 / l, 'rgba(0,0,0,1)');\r\n    f.addColorStop(78 / l, 'rgba(0,0,0,1)');\r\n    f.addColorStop(88 / l, 'rgba(0,0,0,0)');\r\n    f.addColorStop(100 / l, 'rgba(0,0,0,0)');\r\n    f.addColorStop(108 / l, 'rgba(0,0,0,1)');\r\n    f.addColorStop(117 / l, 'rgba(0,0,0,1)');\r\n    f.addColorStop(136 / l, 'rgba(0,0,0,0)');\r\n    f.addColorStop(1, 'rgba(0,0,0,0)');\r\n    cvsCtx.beginPath();\r\n    cvsCtx.arc(0, 0, radius, 0, Math.PI * 2);\r\n    cvsCtx.fillStyle = f;\r\n    cvsCtx.fill();\r\n    cvsCtx.restore();\r\n\r\n    Wave.prototype.backgroundImage = cvs.toDataURL();\r\n\r\n    window.Wave = Wave;\r\n})(window, document);\r\n\r\nnew Wave(document.querySelector('#pond'));\r\nnew Wave(document.querySelector('#box'));\r\n"],"file":"script.babel.js"}