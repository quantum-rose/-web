"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ListItem=function(){function ListItem(template,index,height){_classCallCheck(this,ListItem);_defineProperty(this,"_visible",false);this.template=template;this.index=index;this.height=height;this.node=null}_createClass(ListItem,[{key:"visible",get:function get(){return this._visible},set:function set(val){this._visible=val;if(val&&!this.node){this.node=document.createElement("li");this.node.style.top=this.index*this.height+"px";this.node.innerHTML=this.template}}}]);return ListItem}();var VirtualList=function(){function VirtualList(elem,listItems,itemHeight){var _this=this;_classCallCheck(this,VirtualList);_defineProperty(this,"_onscroll",function(e){var newStart=Math.floor(_this.$root.scrollTop/_this.itemHeight);var newEnd=Math.min(newStart+_this.visibleCount,_this.listItems.length)-1;if(newEnd<_this.start||newStart>_this.end){for(var i=_this.start;i<=_this.end;i++){_this.listItems[i].visible=false;_this.$list.removeChild(_this.listItems[i].node)}for(var _i=newStart;_i<=newEnd;_i++){_this.listItems[_i].visible=true;_this.$list.append(_this.listItems[_i].node)}}else if(newStart<_this.start){for(var _i2=newEnd+1;_i2<=_this.end;_i2++){_this.listItems[_i2].visible=false;_this.$list.removeChild(_this.listItems[_i2].node)}for(var _i3=newStart;_i3<_this.start;_i3++){_this.listItems[_i3].visible=true;_this.$list.prepend(_this.listItems[_i3].node)}}else if(newEnd>_this.end){for(var _i4=_this.start;_i4<newStart;_i4++){_this.listItems[_i4].visible=false;_this.$list.removeChild(_this.listItems[_i4].node)}for(var _i5=_this.end+1;_i5<=newEnd;_i5++){_this.listItems[_i5].visible=true;_this.$list.append(_this.listItems[_i5].node)}}_this.start=newStart;_this.end=newEnd});this.$root=elem;this.listItems=listItems;this.itemHeight=itemHeight;this.$list=document.createElement("ul");this.$list.classList.add("list");this.$list.style.height=this.listItems.length*this.itemHeight+"px";this.$root.appendChild(this.$list);this.height=this.$root.offsetHeight;this.visibleCount=Math.ceil(this.height/this.itemHeight)+1;this.start=Math.floor(this.$root.scrollTop/this.itemHeight);this.end=Math.min(this.start+this.visibleCount,this.listItems.length)-1;for(var i=this.start;i<=this.end;i++){this.listItems[i].visible=true;this.$list.append(this.listItems[i].node)}this.$root.addEventListener("scroll",this._onscroll)}_createClass(VirtualList,[{key:"scrollTo",value:function scrollTo(index){if(index<0){index=0}if(index>this.listItems.length-1){index=this.listItems.length-1}this.$root.scrollTop=index*this.itemHeight}}]);return VirtualList}();var listItems=[];for(var i=0;i<100000;i++){listItems[i]=new ListItem("<div class=\"container\"><div class=\"img\"></div><div class=\"text\"><input type=\"text\" placeholder=\"".concat(i,"\" /></div></div>"),i,120)}var $virtualList=document.querySelector(".virtual-list");var virtualList=new VirtualList($virtualList,listItems,120);var $input=document.querySelector("#index");var $go=document.querySelector(".go");$go.addEventListener("click",function(){virtualList.scrollTo($input.value)});$input.addEventListener("keyup",function(e){if(e.keyCode===13){virtualList.scrollTo($input.value)}});