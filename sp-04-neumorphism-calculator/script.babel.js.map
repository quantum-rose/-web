{"version":3,"sources":["script.js"],"names":["Vue","el","data","expression","isCalculated","computed","result","error","replace","match","test","methods","clear","toggleSign","slice","computer","percentage","append","character","calculate","Function","toFixed"],"mappings":"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","sourcesContent":["new Vue({\r\n    el: '#calculator',\r\n    data: {\r\n        expression: '0',\r\n        isCalculated: false,\r\n    },\r\n    computed: {\r\n        result() {\r\n            return this.error\r\n                ? '不能除以0'\r\n                : this.expression.replace(/\\d+(\\.\\d*)?/g, match =>\r\n                      match.replace(/(?<=^\\d+)(?=(\\d{3})+(\\.\\d*)?$)/g, ',')\r\n                  );\r\n        },\r\n        error() {\r\n            return /Infinity|NaN/.test(this.expression);\r\n        },\r\n    },\r\n    methods: {\r\n        clear() {\r\n            this.expression = '0';\r\n        },\r\n        toggleSign() {\r\n            if (/\\d/.test(this.expression.slice(-1))) {\r\n                this.expression = this.expression\r\n                    .replace(/((?<=[×÷])|\\+|-|^)\\d+(\\.\\d*)?$|[+\\-]?\\d(\\.\\d+)?e-?\\d+$/, match =>\r\n                        this.computer(match + '*-1').replace(/^(?=\\d)/, '+')\r\n                    )\r\n                    .replace(/(^|(?<=[×÷]))\\+/, '');\r\n            }\r\n        },\r\n        percentage() {\r\n            if (/\\d/.test(this.expression.slice(-1))) {\r\n                this.expression = this.expression.replace(/(?<=[+\\-×÷]|^)\\d+(\\.\\d*)?$|\\d(\\.\\d+)?e-?\\d+$/, match =>\r\n                    this.computer(match + '*0.01')\r\n                );\r\n            }\r\n        },\r\n        append(character) {\r\n            this.error && this.clear();\r\n            if (character === 0) {\r\n                if (!/(^|[+\\-×÷])0$/.test(this.expression)) {\r\n                    this.expression += '0';\r\n                }\r\n            } else if (/[1-9]/.test(character)) {\r\n                if (this.expression === '0' || this.isCalculated) {\r\n                    this.expression = character + '';\r\n                    this.isCalculated = false;\r\n                } else {\r\n                    this.expression += character;\r\n                }\r\n            } else if (/[+\\-×÷]/.test(character)) {\r\n                this.isCalculated = false;\r\n                if (/[+\\-×÷]/.test(this.expression.slice(-1))) {\r\n                    this.expression = this.expression.slice(0, -1) + character;\r\n                } else {\r\n                    this.expression += character;\r\n                }\r\n            } else if (character === '.') {\r\n                if (/(^|[+\\-×÷])\\d+$/.test(this.expression)) {\r\n                    this.isCalculated = false;\r\n                    this.expression += '.';\r\n                } else if (/[+\\-×÷]/.test(this.expression.slice(-1))) {\r\n                    this.expression += '0.';\r\n                }\r\n            }\r\n        },\r\n        calculate() {\r\n            if (/[\\d.]/.test(this.expression.slice(-1))) {\r\n                this.expression = this.computer(this.expression);\r\n                this.isCalculated = true;\r\n            }\r\n        },\r\n        computer(expression) {\r\n            return new Function(`return ${expression.replace(/×/g, '*').replace(/÷/g, '/')}`)().toFixed(10) - 0 + '';\r\n        },\r\n    },\r\n});\r\n"],"file":"script.babel.js"}