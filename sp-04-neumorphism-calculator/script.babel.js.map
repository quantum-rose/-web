{"version":3,"sources":["script.js"],"names":["Vue","el","data","expression","isCalculated","computed","result","error","replace","match","test","methods","clear","toggleSign","slice","computer","percentage","append","character","calculate","Function","toFixed"],"mappings":";;AAAA,IAAIA,GAAJ,CAAQ;AACJC,EAAAA,EAAE,EAAE,aADA;AAEJC,EAAAA,IAAI,EAAE;AACFC,IAAAA,UAAU,EAAE,GADV;AAEFC,IAAAA,YAAY,EAAE;AAFZ,GAFF;AAMJC,EAAAA,QAAQ,EAAE;AACNC,IAAAA,MADM,oBACG;AACL,aAAO,KAAKC,KAAL,GACD,OADC,GAED,KAAKJ,UAAL,CAAgBK,OAAhB,CAAwB,cAAxB,EAAwC,UAAAC,KAAK;AAAA,eACzCA,KAAK,CAACD,OAAN,CAAc,iCAAd,EAAiD,GAAjD,CADyC;AAAA,OAA7C,CAFN;AAKH,KAPK;AAQND,IAAAA,KARM,mBAQE;AACJ,aAAO,eAAeG,IAAf,CAAoB,KAAKP,UAAzB,CAAP;AACH;AAVK,GANN;AAkBJQ,EAAAA,OAAO,EAAE;AACLC,IAAAA,KADK,mBACG;AACJ,WAAKT,UAAL,GAAkB,GAAlB;AACH,KAHI;AAILU,IAAAA,UAJK,wBAIQ;AAAA;;AACT,UAAI,KAAKH,IAAL,CAAU,KAAKP,UAAL,CAAgBW,KAAhB,CAAsB,CAAC,CAAvB,CAAV,CAAJ,EAA0C;AACtC,aAAKX,UAAL,GAAkB,KAAKA,UAAL,CACbK,OADa,CACL,wDADK,EACqD,UAAAC,KAAK;AAAA,iBACpE,KAAI,CAACM,QAAL,CAAcN,KAAK,GAAG,KAAtB,EAA6BD,OAA7B,CAAqC,SAArC,EAAgD,GAAhD,CADoE;AAAA,SAD1D,EAIbA,OAJa,CAIL,iBAJK,EAIc,EAJd,CAAlB;AAKH;AACJ,KAZI;AAaLQ,IAAAA,UAbK,wBAaQ;AAAA;;AACT,UAAI,KAAKN,IAAL,CAAU,KAAKP,UAAL,CAAgBW,KAAhB,CAAsB,CAAC,CAAvB,CAAV,CAAJ,EAA0C;AACtC,aAAKX,UAAL,GAAkB,KAAKA,UAAL,CAAgBK,OAAhB,CAAwB,8CAAxB,EAAwE,UAAAC,KAAK;AAAA,iBAC3F,MAAI,CAACM,QAAL,CAAcN,KAAK,GAAG,OAAtB,CAD2F;AAAA,SAA7E,CAAlB;AAGH;AACJ,KAnBI;AAoBLQ,IAAAA,MApBK,kBAoBEC,SApBF,EAoBa;AACd,WAAKX,KAAL,IAAc,KAAKK,KAAL,EAAd;;AACA,UAAIM,SAAS,KAAK,CAAlB,EAAqB;AACjB,YAAI,CAAC,gBAAgBR,IAAhB,CAAqB,KAAKP,UAA1B,CAAL,EAA4C;AACxC,eAAKA,UAAL,IAAmB,GAAnB;AACH;AACJ,OAJD,MAIO,IAAI,QAAQO,IAAR,CAAaQ,SAAb,CAAJ,EAA6B;AAChC,YAAI,KAAKf,UAAL,KAAoB,GAApB,IAA2B,KAAKC,YAApC,EAAkD;AAC9C,eAAKD,UAAL,GAAkBe,SAAS,GAAG,EAA9B;AACA,eAAKd,YAAL,GAAoB,KAApB;AACH,SAHD,MAGO;AACH,eAAKD,UAAL,IAAmBe,SAAnB;AACH;AACJ,OAPM,MAOA,IAAI,UAAUR,IAAV,CAAeQ,SAAf,CAAJ,EAA+B;AAClC,aAAKd,YAAL,GAAoB,KAApB;;AACA,YAAI,UAAUM,IAAV,CAAe,KAAKP,UAAL,CAAgBW,KAAhB,CAAsB,CAAC,CAAvB,CAAf,CAAJ,EAA+C;AAC3C,eAAKX,UAAL,GAAkB,KAAKA,UAAL,CAAgBW,KAAhB,CAAsB,CAAtB,EAAyB,CAAC,CAA1B,IAA+BI,SAAjD;AACH,SAFD,MAEO;AACH,eAAKf,UAAL,IAAmBe,SAAnB;AACH;AACJ,OAPM,MAOA,IAAIA,SAAS,KAAK,GAAlB,EAAuB;AAC1B,YAAI,kBAAkBR,IAAlB,CAAuB,KAAKP,UAA5B,CAAJ,EAA6C;AACzC,eAAKC,YAAL,GAAoB,KAApB;AACA,eAAKD,UAAL,IAAmB,GAAnB;AACH,SAHD,MAGO,IAAI,UAAUO,IAAV,CAAe,KAAKP,UAAL,CAAgBW,KAAhB,CAAsB,CAAC,CAAvB,CAAf,CAAJ,EAA+C;AAClD,eAAKX,UAAL,IAAmB,IAAnB;AACH;AACJ;AACJ,KAhDI;AAiDLgB,IAAAA,SAjDK,uBAiDO;AACR,UAAI,QAAQT,IAAR,CAAa,KAAKP,UAAL,CAAgBW,KAAhB,CAAsB,CAAC,CAAvB,CAAb,CAAJ,EAA6C;AACzC,aAAKX,UAAL,GAAkB,KAAKY,QAAL,CAAc,KAAKZ,UAAnB,CAAlB;AACA,aAAKC,YAAL,GAAoB,IAApB;AACH;AACJ,KAtDI;AAuDLW,IAAAA,QAvDK,oBAuDIZ,UAvDJ,EAuDgB;AACjB,aAAO,IAAIiB,QAAJ,kBAAuBjB,UAAU,CAACK,OAAX,CAAmB,IAAnB,EAAyB,GAAzB,EAA8BA,OAA9B,CAAsC,IAAtC,EAA4C,GAA5C,CAAvB,KAA6Ea,OAA7E,CAAqF,EAArF,IAA2F,CAA3F,GAA+F,EAAtG;AACH;AAzDI;AAlBL,CAAR","sourcesContent":["new Vue({\r\n    el: '#calculator',\r\n    data: {\r\n        expression: '0',\r\n        isCalculated: false,\r\n    },\r\n    computed: {\r\n        result() {\r\n            return this.error\r\n                ? '不能除以0'\r\n                : this.expression.replace(/\\d+(\\.\\d*)?/g, match =>\r\n                      match.replace(/(?<=^\\d+)(?=(\\d{3})+(\\.\\d*)?$)/g, ',')\r\n                  );\r\n        },\r\n        error() {\r\n            return /Infinity|NaN/.test(this.expression);\r\n        },\r\n    },\r\n    methods: {\r\n        clear() {\r\n            this.expression = '0';\r\n        },\r\n        toggleSign() {\r\n            if (/\\d/.test(this.expression.slice(-1))) {\r\n                this.expression = this.expression\r\n                    .replace(/((?<=[×÷])|\\+|-|^)\\d+(\\.\\d*)?$|[+\\-]?\\d(\\.\\d+)?e-?\\d+$/, match =>\r\n                        this.computer(match + '*-1').replace(/^(?=\\d)/, '+')\r\n                    )\r\n                    .replace(/(^|(?<=[×÷]))\\+/, '');\r\n            }\r\n        },\r\n        percentage() {\r\n            if (/\\d/.test(this.expression.slice(-1))) {\r\n                this.expression = this.expression.replace(/(?<=[+\\-×÷]|^)\\d+(\\.\\d*)?$|\\d(\\.\\d+)?e-?\\d+$/, match =>\r\n                    this.computer(match + '*0.01')\r\n                );\r\n            }\r\n        },\r\n        append(character) {\r\n            this.error && this.clear();\r\n            if (character === 0) {\r\n                if (!/(^|[+\\-×÷])0$/.test(this.expression)) {\r\n                    this.expression += '0';\r\n                }\r\n            } else if (/[1-9]/.test(character)) {\r\n                if (this.expression === '0' || this.isCalculated) {\r\n                    this.expression = character + '';\r\n                    this.isCalculated = false;\r\n                } else {\r\n                    this.expression += character;\r\n                }\r\n            } else if (/[+\\-×÷]/.test(character)) {\r\n                this.isCalculated = false;\r\n                if (/[+\\-×÷]/.test(this.expression.slice(-1))) {\r\n                    this.expression = this.expression.slice(0, -1) + character;\r\n                } else {\r\n                    this.expression += character;\r\n                }\r\n            } else if (character === '.') {\r\n                if (/(^|[+\\-×÷])\\d+$/.test(this.expression)) {\r\n                    this.isCalculated = false;\r\n                    this.expression += '.';\r\n                } else if (/[+\\-×÷]/.test(this.expression.slice(-1))) {\r\n                    this.expression += '0.';\r\n                }\r\n            }\r\n        },\r\n        calculate() {\r\n            if (/[\\d.]/.test(this.expression.slice(-1))) {\r\n                this.expression = this.computer(this.expression);\r\n                this.isCalculated = true;\r\n            }\r\n        },\r\n        computer(expression) {\r\n            return new Function(`return ${expression.replace(/×/g, '*').replace(/÷/g, '/')}`)().toFixed(10) - 0 + '';\r\n        },\r\n    },\r\n});\r\n"],"file":"script.babel.js"}